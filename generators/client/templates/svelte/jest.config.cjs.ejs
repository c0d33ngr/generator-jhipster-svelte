module.exports = {
	testEnvironment: 'jsdom',
	transform: {
		'^.+\\.svelte$': 'svelte-jester',
	},
	testMatch: ['<rootDir>/(<%= CLIENT_MAIN_SRC_DIR %>**/*.spec.js)'],
	transformIgnorePatterns: ['node_modules/(?!(jhipster-svelte-library))'],
	moduleFileExtensions: ['js', 'svelte'],
	extensionsToTreatAsEsm: [".svelte"],
	moduleNameMapper: {
		'^\\$lib(.*)$': '<rootDir>/<%= CLIENT_MAIN_SRC_DIR %>app/lib$1',
	},
	setupFilesAfterEnv: ['<rootDir>/jest-setup.js'],
	coverageDirectory: '<rootDir>/<%= BUILD_DIR %>jest-coverage/',
	cacheDirectory: '<rootDir>/<%= BUILD_DIR %>jest-cache',
	reporters: [
		'default',
		[
			'jest-junit',
			{
				outputDirectory: './<%= BUILD_DIR %>test-results/jest',
				outputName: 'TESTS-results-sonar.xml',
			},
		],
		[
			'jest-sonar',
			{
				outputDirectory: '<%= BUILD_DIR %>test-results/jest',
				outputName: 'TESTS-results-sonar.xml',
				reportedFilePath: 'relative',
			},
		],
	],
}
